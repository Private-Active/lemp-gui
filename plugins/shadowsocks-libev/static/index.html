<div navbar ng-init="currentItem='plugins.shadowsocks'"></div>
<div ng-show="Auth.processing||!loaded">
    <div loading></div>
</div>

<div id="main" ng-show="!Auth.processing&&loaded" style="display:none" ng-init="load()">
    <div class="module-header">
        <h3>Shadowsocks</h3>
    </div>

    <div ng-show="!installed" class="well">
        <div ng-show="!installing">
            <p class="ng-binding">系统检测到 Shadowsocks 当前尚未安装。</p>
            <p>是否要开始安装？</p>
        </div>
        <div ng-show="installing" ng-bind-html-unsafe="installMsg" class="ng-binding" style="display: none;"></div>
            <p ng-show="!installing">
                <button class="btn btn-default" style="margin-top:10px" onclick="history.back()">取消返回</button>
                <button class="btn btn-default" style="margin-top:10px" ng-click="startInstall()">开始安装</button>
            </p>
        </div>
    </div>

    <div class="tabbable" ng-show="installed">
        <ul class="nav nav-tabs">
            <li ng-class="'active' | iftrue:activeTabName=='base'"><a href="#base" ng-click="sec('base')" data-toggle="tab">基本信息</a></li>
            <li ng-class="'active' | iftrue:activeTabName=='settings'"><a href="#settings" ng-click="load_settings()" data-toggle="tab">基本设置</a></li>
            <li ng-class="'active' | iftrue:activeTabName=='ext'"><a href="#ext" ng-click="sec('ext')" data-toggle="tab">扩展</a></li>
            <li ng-class="'active' | iftrue:activeTabName=='configfile'"><a href="#configfile" ng-click="sec('configfile')" data-toggle="tab">配置文件</a></li>
            <li ng-class="'active' | iftrue:activeTabName=='logfile'"><a href="#logfile" ng-click="sec('logfile')" data-toggle="tab">日志</a></li>
            <li ng-class="'active' | iftrue:activeTabName=='update'"><a href="#update" ng-click="sec('update')" data-toggle="tab">升级</a></li>
            <li ng-class="'active' | iftrue:activeTabName=='uninstall'"><a href="#uninstall" ng-click="sec('uninstall')" data-toggle="tab">卸载</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane" ng-class="'active' | iftrue:activeTabName=='base'" id="base">
                <div srvbase ng-init="name='shadowsocks-libev';pkg='shadowsocks-libev';service='shadowsocks-libev';"></div>
            </div>
            <div class="tab-pane" ng-class="'active' | iftrue:activeTabName=='settings'" id="settings">
                <table class="table table-condensed">
                    <thead>
                        <tr>
                            <th colspan="2">基本设置</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <button class="btn btn-primary" style="margin-left:10px" ng-click="savesettings()">保存设置</button>
            </div>
            <div class="tab-pane" ng-class="'active' | iftrue:activeTabName=='ext'" id="ext">
                <div srvext ng-init="name='shadowsocks-libev';pkg='shadowsocks-libev';"></div>
            </div>
            <div class="tab-pane" ng-class="'active' | iftrue:activeTabName=='configfile'" id="configfile">
                <div srvfile ng-init="items=[
                {name: '主配置', path: '/etc/shadowsocks-libev/config.json', isfile: true},
                {name: '解析配置', path: '/etc/resolv.conf', isfile: true},
                {name: 'hosts', path: '/etc/hosts', isfile: true}]"></div>
            </div>
            <div class="tab-pane" ng-class="'active' | iftrue:activeTabName=='logfile'" id="logfile">
                <div srvlog ng-init="items=[{name:'日志文件', path:'/var/log/messages', isfile:true}];"></div>
            </div>
            <div class="tab-pane" ng-class="'active' | iftrue:activeTabName=='update'" id="update">
                <div srvupdate ng-init="name='shadowsocks-libev';pkg='shadowsocks-libev';"></div>
            </div>
            <div class="tab-pane" ng-class="'active' | iftrue:activeTabName=='uninstall'" id="uninstall">
                <div srvuninstall ng-init="name='shadowsocks-libev';pkg='shadowsocks-libev';"></div>
            </div>
        </div>
    </div>

</div>